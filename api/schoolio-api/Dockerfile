FROM openjdk:22-jdk
COPY target/*.jar /api.jar
#
ARG MONGO_DB_CONNECTION_URL
ARG MONGO_DB_DATABASE_NAME
ARG PSQL_DATABASE_URL
ARG PSQL_DATABASE_USERNAME
ARG PSQL_DATABASE_PASSWORD

ENV MONGO_DB_CONNECTION_URL=${MONGO_DB_CONNECTION_URL}
ENV MONGO_DB_DATABASE_NAME=${MONGO_DB_DATABASE_NAME}
ENV PSQL_DATABASE_URL=${PSQL_DATABASE_URL}
ENV PSQL_DATABASE_USERNAME=${PSQL_DATABASE_USERNAME}
ENV PSQL_DATABASE_PASSWORD=${PSQL_DATABASE_PASSWORD}

EXPOSE 8080
ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=prod", "/api.jar"]

